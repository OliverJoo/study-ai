# Git Merge vs. Rebase: 협업을 위한 완벽 가이드

Git으로 협업할 때 브랜치를 통합하는 두 가지 주요 방법은 `merge`와 `rebase`입니다. 두 명령어는 기능적으로는 동일한 목표(브랜치 통합)를 달성하지만, 프로젝트 **히스토리(history)를 다루는 방식**에서 큰 차이가 있습니다.

이 문서는 두 명령어의 차이점, 협업 시 `merge`가 권장되는 이유, 그리고 실제 코드 예시를 통해 히스토리가 어떻게 달라지는지 종합적으로 설명합니다.

---

## 1. Merge와 Rebase: 핵심 개념 차이

### Git Merge: 히스토리를 있는 그대로 보존

`merge`는 이름 그대로 두 브랜치의 변경 이력을 하나로 합치는 가장 직관적이고 안전한 방법입니다.

-   **작동 방식**: `main` 브랜치에 `feature` 브랜치를 병합하면, 각 브랜치의 최종 커밋들을 하나로 합치는 새로운 **병합 커밋(Merge Commit)**이 `main` 브랜치에 생성됩니다.
-   **히스토리**: 기존 커밋들은 절대 변경되지 않고 그대로 유지됩니다. **"어떤 브랜치가 언제 병합되었는가"**에 대한 사실이 병합 커밋을 통해 명확하게 남습니다.


### Git Rebase: 히스토리를 깔끔하게 재정렬

`rebase`는 브랜치의 베이스(base), 즉 공통 조상 커밋을 다른 커밋으로 옮겨 히스토리를 **재작성(rewrite)**하는 방식입니다.

-   **작동 방식**: `feature` 브랜치를 `main` 브랜치 위로 `rebase`하면, `feature` 브랜치의 커밋들이 `main` 브랜치의 최신 커밋 뒤로 이동하여 붙습니다. 이 과정에서 기존 커밋은 사라지고, 동일한 내용을 가진 **새로운 해시(hash) 값의 커밋이 복사되어 생성**됩니다.
-   **히스토리**: 병합 커밋 없이 히스토리가 한 줄로 깔끔하게 정리됩니다. 하지만 원래 커밋의 타임라인과 컨텍스트가 변경되어 히스토리의 무결성이 깨질 수 있습니다.


---

## 2. 협업 시 Merge를 추천하는 이유

`rebase`는 깔끔한 히스토리를 제공하지만, 여러 명이 함께 사용하는 **공유 브랜치(shared branch)**에 사용하면 심각한 문제를 일으킬 수 있습니다. 이것이 협업 환경에서 `merge`를 강력히 권장하는 이유입니다.

### 1. 히스토리의 무결성과 추적 가능성
`merge`는 기존 커밋을 변경하지 않고 병합 사실을 있는 그대로 기록합니다. 병합 커밋은 "언제, 어떤 작업 브랜치가 `main`에 통합되었는가"라는 중요한 감사 로그(audit log) 역할을 합니다.

-   **장점**:
    -   **문제 추적 용이**: 특정 기능이 추가된 후 버그가 발생했다면, 병합 커밋을 통해 어떤 브랜치가 원인인지 쉽게 파악하고 해당 브랜치의 변경 내용만 집중적으로 검토할 수 있습니다.
    -   **작업 단위 파악**: 병합 커밋은 하나의 기능 또는 작업 단위의 완성을 의미하므로 전체 프로젝트의 흐름을 이해하기 쉽습니다.

### 2. 공유 브랜치에서의 안전성
**`rebase`의 가장 큰 위험은 공유 브랜치의 히스토리를 변경한다는 점입니다.**

팀원 A가 공유 브랜치를 `rebase`하고 원격 저장소에 강제로 push (`git push --force`)하면, 팀원 B가 가지고 있던 동일 브랜치의 히스토리와 충돌하게 됩니다. 이로 인해 팀 전체의 저장소가 엉망이 될 수 있으며, 복구에 많은 노력이 필요합니다.

`merge`는 기존 히스토리를 변경하지 않고 새로운 커밋을 추가하는 방식이므로 `force push`가 필요 없습니다. 따라서 다른 팀원들의 작업에 영향을 주지 않고 안전하게 변경 사항을 통합할 수 있습니다.

### 3. 명확한 컨텍스트 유지
`merge`는 각 브랜치가 독립적으로 개발된 후 합쳐졌다는 사실을 히스토리에 그대로 남깁니다. 이는 "어떤 코드가 어떤 기능 브랜치에서 유래되었는가"에 대한 컨텍스트를 명확하게 보여줍니다. `rebase`는 모든 커밋을 한 줄로 나열하기 때문에 이러한 개발 컨텍스트가 사라져 나중에 코드를 이해하기 더 어려울 수 있습니다.

---